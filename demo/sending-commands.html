<html>
  <head>
    <script src="./soulmachines.js"></script>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet" />
    <style>
      body,
      html {
        margin: 0;
      }

      #video {
        border: none;
        width: 100vw;
        height: 100vh;
      }

      #user-actions {
        position: fixed;
        bottom: 0;
        width: 100%;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      button {
        font-family: 'Material Icons';
        font-size: 1.3em;
        width: 2em;
        height: 2em;
        border-radius: 50%;
        border: none;
        margin: 1em 0.25em;
        background: white;
      }

      #microphone.on::after {
        content: 'mic';
      }

      #microphone.off::after {
        content: 'mic_off';
      }

      #disconnect {
        background: rgb(170, 24, 24);
        color: white;
      }

      #connect {
        background: rgb(17, 196, 38);
        color: white;
      }
    </style>
  </head>
  <body>
    <sm-video
      id="video"
      autoconnect="true"
      debug="false"
      tokenserver="http://localhost:4210/auth/authorize"
    ></sm-video>

    <div id="user-actions">
      <button id="microphone" class="on"></button>
      <button id="disconnect">call_end</button>
      <button id="connect">connect</button>
    </div>

    <script>
      var video = document.getElementById('video');

      // microphone
      var micButton = document.getElementById('microphone');
      micButton.addEventListener('click', function () {
        var micEnabled = micButton.classList.contains('on');
        if (micEnabled) {
          // disable mic
          video.setMicrophoneEnabled(false);
          // update UI to reflect the change
          micButton.classList.remove('on');
          micButton.classList.add('off');
        } else {
          // enable mic
          video.setMicrophoneEnabled(true);
          // update UI to reflect the change
          micButton.classList.remove('off');
          micButton.classList.add('on');
        }
      });

      // disconnect
      var disconnectButton = document.getElementById('disconnect');
      disconnectButton.addEventListener('click', function () {
        video.disconnect();
      });

      //connect
      var connectButton = document.getElementById('connect');
      connectButton.addEventListener('click', function () {
        video.connect();
      });
    </script>
  </body>
</html>
