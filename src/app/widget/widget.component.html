<div class="dp-container" [ngClass]="connectionState">
  <app-profile-picture
    class="profile-picture"
    [profilePicture]="profilePicture"
    (click)="connect()"
  ></app-profile-picture>
  <app-video
    #video
    class="dp-video"
    theme="none"
    [token-server]="tokenServer"
    [api-key]="apiKey"
    [auto-connect]="autoConnect"
    (connected)="onConnected()"
    (disconnected)="onDisconnected()"
  ></app-video>

  <div class="user-controls">
    <button class="close-button on" (click)="disconnect()">
      <app-icon name="close"></app-icon>
    </button>

    <button *ngIf="micEnabled" class="mic-button on" (click)="toggleMic()">
      <app-icon name="mic"></app-icon>
    </button>

    <button *ngIf="!micEnabled" class="mic-button off" (click)="toggleMic()">
      <app-icon name="micOff"></app-icon>
    </button>
  </div>
</div>

<slot>
  <app-greeting
    *ngIf="connectionState === ConnectionState.Disconnected"
    class="greeting-card"
    [greeting]="greetingText"
  ></app-greeting>
</slot>
